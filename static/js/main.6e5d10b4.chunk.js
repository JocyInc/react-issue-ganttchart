(this["webpackJsonpreact-issue-ganttchart"]=this["webpackJsonpreact-issue-ganttchart"]||[]).push([[0],{103:function(e,t,n){},124:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(11),o=n.n(i),l=n(54),u=n(12),s=(n(90),n(31)),c=n(32),d=n(73),f=n(4),h=n(165),g=n(72),p=n.n(g),y=n(167),m=n(129),b=n(166),v=n(70),k=n(168),_={multiselectContainer:{width:"30%",display:"inline-block",verticalAlign:"middle",padding:"4px",alignItems:"flex-end"},chips:{background:"light blue",fontSize:"15px"},searchBox:{border:"none"}},w=[{title:"The Shawshank Redemption",year:1994},{title:"The Godfather",year:1972},{title:"The Godfather: Part II",year:1974},{title:"The Dark Knight",year:2008},{title:"12 Angry Men",year:1957},{title:"Schindler's List",year:1993},{title:"Pulp Fiction",year:1994},{title:"The Lord of the Rings: The Return of the King",year:2003},{title:"The Good, the Bad and the Ugly",year:1966},{title:"Fight Club",year:1999},{title:"The Lord of the Rings: The Fellowship of the Ring",year:2001},{title:"Star Wars: Episode V - The Empire Strikes Back",year:1980},{title:"Forrest Gump",year:1994},{title:"Inception",year:2010},{title:"The Lord of the Rings: The Two Towers",year:2002},{title:"One Flew Over the Cuckoo's Nest",year:1975},{title:"Goodfellas",year:1990},{title:"The Matrix",year:1999},{title:"Seven Samurai",year:1954},{title:"Star Wars: Episode IV - A New Hope",year:1977},{title:"City of God",year:2002},{title:"Se7en",year:1995},{title:"The Silence of the Lambs",year:1991},{title:"It's a Wonderful Life",year:1946},{title:"Life Is Beautiful",year:1997},{title:"The Usual Suspects",year:1995},{title:"L\xe9on: The Professional",year:1994},{title:"Spirited Away",year:2001},{title:"Saving Private Ryan",year:1998},{title:"Once Upon a Time in the West",year:1968},{title:"American History X",year:1998},{title:"Interstellar",year:2014},{title:"Casablanca",year:1942},{title:"City Lights",year:1931},{title:"Psycho",year:1960},{title:"The Green Mile",year:1999},{title:"The Intouchables",year:2011},{title:"Modern Times",year:1936},{title:"Raiders of the Lost Ark",year:1981},{title:"Rear Window",year:1954},{title:"The Pianist",year:2002},{title:"The Departed",year:2006},{title:"Terminator 2: Judgment Day",year:1991},{title:"Back to the Future",year:1985},{title:"Whiplash",year:2014},{title:"Gladiator",year:2e3},{title:"Memento",year:2e3},{title:"The Prestige",year:2006},{title:"The Lion King",year:1994},{title:"Apocalypse Now",year:1979},{title:"Alien",year:1979},{title:"Sunset Boulevard",year:1950},{title:"Dr. Strangelove or: How I Learned to Stop Worrying and Love the Bomb",year:1964},{title:"The Great Dictator",year:1940},{title:"Cinema Paradiso",year:1988},{title:"The Lives of Others",year:2006},{title:"Grave of the Fireflies",year:1988},{title:"Paths of Glory",year:1957},{title:"Django Unchained",year:2012},{title:"The Shining",year:1980},{title:"WALL\xb7E",year:2008},{title:"American Beauty",year:1999},{title:"The Dark Knight Rises",year:2012},{title:"Princess Mononoke",year:1997},{title:"Aliens",year:1986},{title:"Oldboy",year:2003},{title:"Once Upon a Time in America",year:1984},{title:"Witness for the Prosecution",year:1957},{title:"Das Boot",year:1981},{title:"Citizen Kane",year:1941},{title:"North by Northwest",year:1959},{title:"Vertigo",year:1958},{title:"Star Wars: Episode VI - Return of the Jedi",year:1983},{title:"Reservoir Dogs",year:1992},{title:"Braveheart",year:1995},{title:"M",year:1931},{title:"Requiem for a Dream",year:2e3},{title:"Am\xe9lie",year:2001},{title:"A Clockwork Orange",year:1971},{title:"Like Stars on Earth",year:2007},{title:"Taxi Driver",year:1976},{title:"Lawrence of Arabia",year:1962},{title:"Double Indemnity",year:1944},{title:"Eternal Sunshine of the Spotless Mind",year:2004},{title:"Amadeus",year:1984},{title:"To Kill a Mockingbird",year:1962},{title:"Toy Story 3",year:2010},{title:"Logan",year:2017},{title:"Full Metal Jacket",year:1987},{title:"Dangal",year:2016},{title:"The Sting",year:1973},{title:"2001: A Space Odyssey",year:1968},{title:"Singin' in the Rain",year:1952},{title:"Toy Story",year:1995},{title:"Bicycle Thieves",year:1948},{title:"The Kid",year:1921},{title:"Inglourious Basterds",year:2009},{title:"Snatch",year:2e3},{title:"3 Idiots",year:2009},{title:"Monty Python and the Holy Grail",year:1975}],L=Object(f.a)((function(e){return{root:{"& > *":{fontSize:"13px",marginRight:"4px"}}}}))((function(e){var t=e.classes;return r.a.createElement("form",{noValidate:!0},r.a.createElement(y.a,{className:t.root,required:!0,placeholder:"https://github.com/lamact/react-issue-ganttchart",label:"Git Repository URL",style:{width:"25%",verticalAlign:"middle"},onChange:function(t){e.onGitURLChange(t.target.value)},inputRef:e.register,name:"git_url"}),r.a.createElement(y.a,{className:t.root,placeholder:"Access Token",label:"Access Token",style:{width:"10%",verticalAlign:"middle"},onChange:function(t){e.onTokenChange(t.target.value)},inputRef:e.register,name:"token"}),r.a.createElement(v.Multiselect,{className:t.root,options:e.labels,selectedValues:e.selected_labels,onSelect:function(t){e.onSelectedLabelChange(t)},onRemove:function(t){e.onSelectedLabelChange(t)},displayValue:"name",style:_,placeholder:"filter by labels",hidePlaceholder:"false",emptyRecordMsg:"No Labels",closeIcon:"cancel"}),r.a.createElement(k.a,{className:t.root,size:"small",options:w,getOptionLabel:function(e){return e.title},style:{width:"15%",verticalAlign:"middle",display:"inline-block",marginRight:"15px"},renderInput:function(e){return r.a.createElement(y.a,Object.assign({},e,{className:t.root,label:"Assignee",variant:"standard"}))}}),r.a.createElement(b.a,{size:"small",style:{height:"34px"}},r.a.createElement(m.a,{onClick:function(t){e.onZoomChange("Weeks")}},"Weeks"),r.a.createElement(m.a,{onClick:function(t){e.onZoomChange("Days")}},"Days")),r.a.createElement(h.a,{color:"primary",style:{verticalAlign:"middle"}},r.a.createElement(p.a,{onClick:function(t){e.onUpdateClick()}})))})),S=(n(103),L),T=n(23),D=(n(104),n(8)),C=n.n(D),j=n(15),A=n(50),E=n.n(A),O=function(e){return null!==e&&e!==[]&&void 0!==e},R=function(e,t){var n=new Date(e);return E()(n).add(t-1,"d").toDate().toLocaleDateString("ja-JP")},P=function(e,t,n){return null!=e&&null!=t?e.toLocaleDateString("ja-JP"):new Date(n).toLocaleDateString("ja-JP")},I=function(e,t){return null!=e&&null!=t?function(e,t){var n=E()(e);return E()(t).diff(n,"days")+1}(e,t):1},x=function(e,t){return null==e||null==t},B=function(e,t){var n=[];n.push(e),t(n={data:n,links:[]})},U=function(e){return e.length>1&&/\/$/.test(e)&&(e=e.slice(0,-1)),e},z=function(e){return e.length>1&&/ +$/.test(e)&&(e=e.slice(0,-1)),e},F=function(e){var t=e;return t=U(t),t=z(t),t=U(t),t=z(t)},G=function(e){if(null==e)return null;var t=e.match(/start_date: \d{4}\/\d{1,2}\/\d{1,2}/);return null==t?null:(t=t[0].match(/\d{4}\/\d{1,2}\/\d{1,2}/)[0],new Date(t))},M=function(e,t){return null!=G(e)?e.replace(/start_date: \d{4}\/\d{1,2}\/\d{1,2}/,"start_date: "+t):"start_date: "+t+"  \n"+e},W=function(e){if(null==e)return null;var t=e.match(/due_date: \d{4}\/\d{1,2}\/\d{1,2}/);return null==t?null:(t=t[0].match(/\d{4}\/\d{1,2}\/\d{1,2}/)[0],new Date(t))},J=function(e){if(null==e)return null;var t=e.match(/progress: \d{1}\.\d{1}/);return null==t?.1:(t=t[0].match(/\d{1}\.\d{1}/)[0],parseFloat(t))},N=function(e,t){var n=J(e),a=Math.round(10*t)/10;return"1"===t&&(t="1.0"),null!=n?e.replace(/progress: \d{1}\.\d{1}/,"progress: "+a):"progress: "+a+"  \n"+e},V=function(e){var t="";return O(e)&&e.map((function(e){return t+=e.id+":"+e.name+":"+e.type+",",null})),t},K="https://api.github.com/repos/",Z=function(e){return console.log(e),/github\.com/.test(e)},H=function(e){var t=e.split("/");if(t.length>=5)return t[3]},q=function(e){var t=e.split("/");if(t.length>=5)return t[4]},$=function(e,t){var n=F(e);return K+H(n)+"/"+q(n)+"/issues/"+t},Q=function(e,t){var n="",a="";O(t)&&(n+="?labels=",t.map((function(e){return"label"===e.type&&(n+=e.name+","),"assignee"===e.type&&(a="&assignee="+e.name),null})),n+=a);var r=F(e);return K+H(r)+"/"+q(r)+"/issues"+n},Y=function(e){var t=F(e);return K+H(t)+"/"+q(t)+"/labels"},X=function(e,t){var n=F(e);return"https://github.com/"+H(n)+"/"+q(n)+"/issues/"+t},ee=function(e){return/gitlab\.com/.test(e)},te=function(e){var t=e.split("/");return t.length>=3?t[2]:null},ne=function(e){var t=null,n=te(e);return null!==n&&(t="https://"+n+"/"),ee(e)&&(t="https://gitlab.com/"),t},ae=function(e){return ne(e)},re=function(e){return ne(e)+"api/v4/projects/"},ie=function(e){var t=e.split("/");if(t.length>=5)return t[3]},oe=function(e){var t=e.split("/");if(t.length>=5)return t[4]},le=function(e){var t="";return O(e)?t+="?access_token="+e+"&":t+="?",t},ue=function(e,t,n){var a=le(t);O(n)&&(a+="labels=",n.map((function(e){return a+=e.name+",",null})));var r=F(e);return re(e)+ie(r)+"%2F"+oe(r)+"/issues"+a},se=function(e,t){var n=le(t),a=F(e);return re(e)+ie(a)+"%2F"+oe(a)+"/labels"+n},ce=n(25),de=n.n(ce),fe=function(e,t){var n=G(e),a=W(e);return{id:t.number,text:t.title,start_date:P(n,a,t.created_at),duration:I(n,a),progress:J(e),unscheduled:x(n,a)}},he=function(e,t){var n=new Date(t.start_date).toLocaleDateString("ja-JP"),a=R(n,t.duration);return e=function(e,t){return null!=W(e)?e.replace(/due_date: \d{4}\/\d{1,2}\/\d{1,2}/,"due_date: "+t):"due_date: "+t+"  \n"+e}(e=N(e,t.progress),a),e=M(e,n)},ge=function(){var e=Object(j.a)(C.a.mark((function e(t,n,a){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:de.a.get(Q(n,a)).then((function(e){e.data.map((function(e){return de.a.get($(n,e.number)).then((function(n){var a=fe(n.data.body,e);B(a,t)})),null}))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),pe=function(){var e=Object(j.a)(C.a.mark((function e(t,n,a,r){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(r),console.log(a),t([]),de.a.get(Y(n)).then((function(e){var n=[];e.data.map((function(e){return n.push({id:e.id,name:e.name,type:"label"}),null})),console.log("label"),console.log(a),console.log(n),t(a.concat(n))}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),ye=function(e,t){var n="";n+="start_date:%20"+(new Date).toLocaleDateString("ja-JP")+"%0D%0A",n+="due_date:%20"+(new Date).toLocaleDateString("ja-JP")+"%0D%0A",n+="progress:%200.1%0D%0A",window.open(function(e){var t=F(e);return"https://github.com/"+H(t)+"/"+q(t)+"/issues/new?assignees=&labels=&title=&body="}(t)+n,"_blank")},me=function(e){var t=G(e.description),n=new Date(e.due_date).toLocaleDateString("ja-JP");return{id:e.iid,text:e.title,start_date:P(t,n,e.created_at),duration:I(t,n),progress:J(e.description),unscheduled:x(t,n)}},be=function(){var e=Object(j.a)(C.a.mark((function e(t,n,a,r){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:de.a.get(ue(n,a,r)).then((function(e){e.data.map((function(e){var n=me(e);return B(n,t),null}))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),ve=function(){var e=Object(j.a)(C.a.mark((function e(t,n,a){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:de.a.get(se(n,a)).then((function(e){var n=[];e.data.map((function(e){return n.push(e),null})),t(n)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),ke=function(e,t,n,a){de.a.get(function(e,t,n){var a=le(t),r=F(e);return re(e)+ie(r)+"%2F"+oe(r)+"/issues"+a}(a,t)).then((function(r){r.data.map((function(r){if(r.iid===e.id){var i=function(e,t){var n=new Date(t.start_date).toLocaleDateString("ja-JP");return e=N(e,t.progress),e=M(e,n),encodeURIComponent(e)}(r.description,e),o=new Date(e.start_date).toLocaleDateString("ja-JP"),l=R(o,e.duration),u=function(e,t,n){var a=le(t),r=F(e);return re(e)+ie(r)+"%2F"+oe(r)+"/issues/"+n+a}(a,t,e.id)+"&description="+i+"&due_date="+l;de.a.put(u).then((function(e){console.log("success update issue")})).catch((function(e){alert("failed update GitLab issue. check your token."),be(n,a)}))}return null}))}))},_e=function(e,t){window.open(function(e,t){var n=F(e);return ae(e)+ie(n)+"/"+oe(n)+"/-/issues/"+t}(t,e),"_blank")},we=function(e,t){var n="";n+="start_date:%20"+(new Date).toLocaleDateString("ja-JP")+"%20%20%0D%0A",n+="progress:%200.1%0D%0A",window.open(function(e){var t=F(e);return ae(e)+ie(t)+"/"+oe(t)+"/issues/new?issue[description]="}(t)+n,"_blank")},Le=function(){var e=Object(j.a)(C.a.mark((function e(t,n,a,r){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O(n)){e.next=2;break}return e.abrupt("return",null);case 2:Z(n)&&ge(t,n,r),ee(n)&&be(t,n,a,r);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Se=function(){var e=Object(j.a)(C.a.mark((function e(t,n,a,r){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O(n)){e.next=2;break}return e.abrupt("return",null);case 2:Z(n)&&pe(t,n,a,r),ee(n)&&ve(t,n,r);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Te=function(e,t,n,a){if(!O(a))return null;Z(a)&&function(e,t,n,a){var r=$(a,e.id);de.a.get(r).then((function(i){de.a.post(r,{body:he(i.data.body,e)},{headers:{Authorization:"token ".concat(t)}}).then((function(e){console.log("success update issue")})).catch((function(e){alert("failed update GitHub issue. check your token."),ge(n,a)}))}))}(e,t,n,a),(ee(a)||null!==te(a))&&ke(e,t,n,a)},De=function(e,t){if(!O(t))return null;console.log("awqa"),console.log(t),console.log(e),Z(t)&&(console.log("gfweggq"),function(e,t){console.log(X(t,e)),window.open(X(t,e),"_blank")}(e,t)),(ee(t)||null!==te(t))&&_e(e,t)},Ce={levels:[{name:"Days",scale_height:60,min_column_width:70,scales:[{unit:"week",step:1,format:"%M, %d week"},{unit:"day",step:1,format:"%d %M"}]},{name:"Weeks",scale_height:60,min_column_width:70,scales:[{unit:"month",step:1,format:"%Y %F"},{unit:"week",step:1,format:"%M, %d week"}]}]},je=function(e){e.config.xml_date="%Y/%m/%d %H:%i",e.config.order_branch=!0,e.config.order_branch_free=!0,e.config.keep_grid_width=!0,e.config.grid_resize=!0,e.config.show_unscheduled=!0,e.config.sort=!0,e.ext.zoom.init(Ce)},Ae=function(e,t){e.attachEvent("onTaskDblClick",(function(e,n){t.openIssueAtBrowser(e)})),e.attachEvent("onTaskCreated",(function(e,n){t.openNewIssueAtBrowser(e)})),e.attachEvent("onAfterTaskUpdate",(function(n,a){t.updateIssueByAPI(a,e)}))},Ee=function(e){var t=Object(a.useRef)(null);return Object(a.useEffect)((function(){je(T.gantt),Ae(T.gantt,e),T.gantt.init(t.current),T.gantt.ext.zoom.setLevel(e.zoom),T.gantt.clearAll(),Le((function(e){T.gantt.parse(e),T.gantt.sort("start_date",!1)}),e.git_url,e.token,e.selected_labels)}),[]),Object(a.useEffect)((function(){T.gantt.ext.zoom.setLevel(e.zoom)}),[e.zoom]),Object(a.useEffect)((function(){T.gantt.clearAll(),Le((function(e){T.gantt.parse(e),T.gantt.sort("start_date",!1)}),e.git_url,e.token,e.selected_labels)}),[e.git_url,e.token,e.selected_labels,e.update]),r.a.createElement("div",{ref:t,style:{width:"100%",height:"100%"}})},Oe=(n(124),Ee),Re=n(51),Pe={currentZoom:"Weeks",update:0,git_url:"",token:"Tokens that have not yet been entered",labels:[],selected_labels:[]},Ie=function(e,t){switch(t.type){case"zoomChange":return Object(c.a)({},e,{currentZoom:t.value});case"gitURLChange":return Object(c.a)({},e,{git_url:xe(t.value.props,t.value.git_url,e.selected_labels)});case"tokenChange":return Object(c.a)({},e,{token:Be(t.value)});case"labelChange":return Object(c.a)({},e,{labels:t.value});case"selectedLabelsChange":return Object(c.a)({},e,{selected_labels:Ue(t.value.props,e.git_url,t.value.selected_labels)});case"updateClick":return Object(c.a)({},e,{update:e.update+1});case"setStateFromURLQueryString":return ze(e,t.value.props,t.value.setValue);default:return e}},xe=function(e,t,n){var a=new URLSearchParams(e.location.search);return a.set("giturl",t),a.set("labels",V(n)),e.history.push({search:a.toString()}),t},Be=function(e){return Object(Re.bake_cookie)("git_token",e),e},Ue=function(e,t,n){n=function(e){var t=e.filter((function(e){return"assignee"===e.type}));return t.length>1&&(e=e.filter((function(e){return e.id!==t[0].id}))),e}(n);var a=new URLSearchParams(e.location.search);return a.set("giturl",t),a.set("labels",V(n)),e.history.push({search:a.toString()}),n},ze=function(e,t,n){var a=new URLSearchParams(t.location.search);return e.git_url=a.get("giturl"),e.selected_labels=function(e){var t=[];if(O(e)){var n=e.split(",");n.forEach((function(e,a,r){if(a<n.length-1){var i=e.split(":"),o={id:i[0],name:i[1],type:i[2]};t.push(o)}}))}return t}(a.get("labels")),n("git_url",e.git_url),e},Fe=Object(u.e)((function(e){var t=Object(a.useReducer)(Ie,Pe),n=Object(s.a)(t,2),i=n[0],o=n[1],l=Object(d.a)({git_url:"",token:""}),u=l.register,c=l.setValue;return Object(a.useEffect)((function(){c("token",Object(Re.read_cookie)("git_token")),o({type:"tokenChange",value:Object(Re.read_cookie)("git_token")})}),[]),Object(a.useEffect)((function(){o({type:"setStateFromURLQueryString",value:{props:e,setValue:c}})}),[e.location]),Object(a.useEffect)((function(){console.log("setLabelListOfRepoFromAPI"),Se((function(e){o({type:"labelChange",value:e}),console.log(e)}),i.git_url,i.labels,i.token)}),[i.git_url,i.token]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"zoom-bar"},r.a.createElement(S,{zoom:i.currentZoom,onZoomChange:function(e){return o({type:"zoomChange",value:e})},onGitURLChange:function(t){return o({type:"gitURLChange",value:{props:e,git_url:t}})},token:i.token,onTokenChange:function(e){return o({type:"tokenChange",value:e})},onUpdateClick:function(){return o({type:"updateClick"})},labels:i.labels,selected_labels:i.selected_labels,onSelectedLabelChange:function(t){return o({type:"selectedLabelsChange",value:{props:e,selected_labels:t}})},register:u})),r.a.createElement("div",{className:"gantt-container"},r.a.createElement(Oe,{zoom:i.currentZoom,git_url:i.git_url,token:i.token,selected_labels:i.selected_labels,update:i.update,openIssueAtBrowser:function(e){return De(e,i.git_url)},openNewIssueAtBrowser:function(e){return function(e,t){if(!O(t))return null;Z(t)&&ye(0,t),(ee(t)||null!==te(t))&&we(0,t)}(0,i.git_url)},updateIssueByAPI:function(e,t){return Te(e,i.token,t,i.git_url)}})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(l.a,null,r.a.createElement(u.a,{render:function(e){return r.a.createElement(Fe,null)}})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},85:function(e,t,n){e.exports=n(128)},90:function(e,t,n){}},[[85,1,2]]]);
//# sourceMappingURL=main.6e5d10b4.chunk.js.map